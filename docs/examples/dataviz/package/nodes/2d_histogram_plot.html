<!DOCTYPE html>
<html>

<!-- the head allows this page to be loaded standalone to test the layout, but is ignored by skadi -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

    <link href="https://visualtopology.github.io/exo/versions/latest/exo.css" rel="stylesheet" type="text/css">
    <link href="https://visualtopology.github.io/exo/versions/latest/exo-icons.css" rel="stylesheet" type="text/css">
    <script src="https://visualtopology.github.io/exo/versions/latest/exo.js" type="text/javascript"></script>

    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.6.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.2"></script>

    <script src="../../../../versions/latest/skadi-ui.js" type="text/javascript"></script>
    <script>
        skadiui.set_message_handler((msg) => {
            let vizdiv = document.getElementById("vizdiv");
            if (msg.dataset) {
                let spec = {
                    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                    "description": "A 2D Histogram.",
                    "data": {"format": {"type": "csv"}, "values": msg.dataset},
                    "mark": "rect",
                    "width": msg.width - 200,
                    "height": msg.height - 200,
                    "encoding": {
                        "x": {"field": msg.x_col, "type": "quantitative", "bin": {"maxbins": 50}},
                        "y": {"field": msg.y_col, "type": "quantitative", "bin": {"maxbins": 50}},
                        "color": {
                            "aggregate": "count",
                            "type": "quantitative"
                        }
                    },
                    "config": {
                        "view": {
                            "stroke": "transparent"
                        }
                    }
                }
                vegaEmbed(vizdiv, spec, {"actions": false});
            } else {
                vizdiv.innerHTML = "";
            }
        });
    </script>
</head>
<body>
    <div class="exo-row">
        <div class="exo-2-cell">
            <exo-select id="x_axis" label="X-Axis">
            </exo-select>
        </div>
        <div class="exo-2-cell">
            <exo-select id="y_axis" label="Y-Axis">
            </exo-select>
        </div>
    </div>
    <div id="vizdiv">
    </div>
</body>
</html>

